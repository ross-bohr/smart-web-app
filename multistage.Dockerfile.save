FROM mcr.microsoft.com/dotnet/sdk:8.0-alpine AS base
WORKDIR src
COPY source .
#RUN ls
RUN dotnet build -o /output

FROM mcr.microsoft.com/dotnet/aspnet:8.0-alpine
RUN rossgroup -S appgroup && adduser -S ross -G appgroup
USER ross
WORKDIR app
COPY --from=base /output .
EXPOSE 8080
ENTRYPOINT ["dotnet", "app1.dll"]
